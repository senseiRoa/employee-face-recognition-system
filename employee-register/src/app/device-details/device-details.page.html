<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Device Details</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" color="light" (click)="refreshDeviceInfo()">
        <ion-icon name="refresh-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Device Information -->
  <div class="section-title">
    <h2>Device Information</h2>
  </div>

  <ion-card class="info-card">
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="phone-portrait-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Device Model</h3>
            <p>{{deviceInfo.model || 'Unknown'}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="hardware-chip-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Platform</h3>
            <p>{{deviceInfo.platform || 'Unknown'}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="information-circle-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Operating System</h3>
            <p>{{deviceInfo.operatingSystem}} {{deviceInfo.osVersion}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="globe-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Device ID</h3>
            <p>{{deviceInfo.deviceId || 'Generating...'}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="cellular-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Network Type</h3>
            <p>{{networkInfo.connectionType || 'Unknown'}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="wifi-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Connection Status</h3>
            <ion-badge [color]="networkInfo.connected ? 'success' : 'danger'">
              {{networkInfo.connected ? 'Connected' : 'Disconnected'}}
            </ion-badge>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- App Information -->
  <div class="section-title">
    <h2>Application Information</h2>
  </div>

  <ion-card class="info-card">
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="apps-outline" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>App Name</h3>
            <p>{{appInfo.name}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="code-outline" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>App Version</h3>
            <p>{{appInfo.version}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="build-outline" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>Build Number</h3>
            <p>{{appInfo.build}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="library-outline" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>Bundle ID</h3>
            <p>{{appInfo.id}}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Camera Information -->
  <div class="section-title">
    <h2>Camera Capabilities</h2>
  </div>

  <ion-card class="info-card">
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="camera-outline" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Camera Available</h3>
            <ion-badge [color]="cameraInfo.available ? 'success' : 'danger'">
              {{cameraInfo.available ? 'Yes' : 'No'}}
            </ion-badge>
          </ion-label>
        </ion-item>

        <ion-item *ngIf="cameraInfo.available">
          <ion-icon name="videocam-outline" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Front Camera</h3>
            <ion-badge [color]="cameraInfo.frontCamera ? 'success' : 'warning'">
              {{cameraInfo.frontCamera ? 'Available' : 'Not Available'}}
            </ion-badge>
          </ion-label>
        </ion-item>

        <ion-item *ngIf="cameraInfo.available">
          <ion-icon name="camera-reverse-outline" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Rear Camera</h3>
            <ion-badge [color]="cameraInfo.rearCamera ? 'success' : 'warning'">
              {{cameraInfo.rearCamera ? 'Available' : 'Not Available'}}
            </ion-badge>
          </ion-label>
        </ion-item>
      </ion-list>

      <ion-button
        expand="block"
        fill="outline"
        color="success"
        (click)="testCamera()"
        [disabled]="!cameraInfo.available || testingCamera">
        <ion-icon name="camera-outline" slot="start"></ion-icon>
        Test Camera
        <ion-spinner name="crescent" *ngIf="testingCamera" slot="end"></ion-spinner>
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Storage Information -->
  <div class="section-title">
    <h2>Storage Information</h2>
  </div>

  <ion-card class="info-card">
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="folder-outline" slot="start" color="warning"></ion-icon>
          <ion-label>
            <h3>Available Storage</h3>
            <p>{{storageInfo.available}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="save-outline" slot="start" color="warning"></ion-icon>
          <ion-label>
            <h3>Used Storage</h3>
            <p>{{storageInfo.used}}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="archive-outline" slot="start" color="warning"></ion-icon>
          <ion-label>
            <h3>Total Storage</h3>
            <p>{{storageInfo.total}}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Permissions -->
  <div class="section-title">
    <h2>App Permissions</h2>
  </div>

  <ion-card class="info-card">
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let permission of permissions">
          <ion-icon [name]="getPermissionIcon(permission.name)" slot="start" [color]="permission.granted ? 'success' : 'danger'"></ion-icon>
          <ion-label>
            <h3>{{permission.displayName}}</h3>
            <p>{{permission.description}}</p>
          </ion-label>
          <ion-badge slot="end" [color]="permission.granted ? 'success' : 'danger'">
            {{permission.granted ? 'Granted' : 'Denied'}}
          </ion-badge>
        </ion-item>
      </ion-list>

      <ion-button expand="block" fill="outline" color="primary" (click)="checkPermissions()" [disabled]="checkingPermissions">
        <ion-icon name="shield-checkmark-outline" slot="start"></ion-icon>
        Check Permissions
        <ion-spinner name="crescent" *ngIf="checkingPermissions" slot="end"></ion-spinner>
      </ion-button>
    </ion-card-content>
  </ion-card>

</ion-content>
